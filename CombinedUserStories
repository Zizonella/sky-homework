#I am a customer
# who wants to know what a 2 bedroom apartment in West London costs
# so that I can potentially buy one.

SELECT
    listing.id, postcode, name AS region, type AS type, asking_price
FROM listing
         INNER JOIN region ON listing.region_id=region.id
         INNER JOIN type ON listing.type_id=type.id -- (i added this to specif only flats)
WHERE region.name = 'West' AND bedrooms = '2' AND type.type = 'flat';

#I am a customer
# who wants to know buy a 1 bedroom apartment in East London
# so that I can relocate.
# SELECT property.id, name AS region
# FROM property INNER JOIN region ON property.region_id = region.id
# WHERE region.name = 'East' AND bedrooms = 1;

SELECT
    listing.id, postcode, name AS region, type AS type
FROM listing
         INNER JOIN region ON listing.region_id=region.id
         INNER JOIN type ON listing.type_id=type.id -- (i added this to specif only flats)
WHERE region.name = 'East' AND bedrooms = '1' AND type.type = 'flat';

# As an agent
# I  want to add a new property
# so that I can sell it.

INSERT INTO listing (id,region_id, postcode, bedrooms, bathrooms, type_id, has_garden, has_parking, sold, asking_price)
VALUES	(11, 4, 'KK6 3JD',	1,	1,	3,	true, true,	false,	2000000);


# As an agent
# I want to delete a region that is unused
# so that I can clear my db from unnecessary data

DELETE FROM region
WHERE name = 'South South West';

# I am a customer
# who wants to buy a property for a maximum of 500000 pounds
# so I stay within my budget.

SELECT id, asking_price AS properties_within_budget
FROM listing
WHERE asking_price <= 500000
ORDER BY asking_price asc ;


# As an owner
# I want to hire an agent
# so that the agency can sell more properties
INSERT INTO agent(email,password,first_name,last_name) VALUES ('steve@hoha.com', 'steve928','Steve','Eco');

# As an agency owner
# I want to delegate administrative responsibilities to an agent
# so that I have more time to manage the business

UPDATE agent SET agent.is_administrator = 1 WHERE id = 2;


# As an agency owner
# I want to remove agents from the database
# that no longer work for the agency

UPDATE agent SET agent.is_employed = 0 WHERE id = 4;

